---
- hosts: servers
  remote_user: root
  tasks:
    - name: Download .war
      get_url:
        url: http://192.168.0.31:8081/artifactory/libs-release-local/com/mkyong/CounterWebApp/webapp-1.0.war
        dest: /apache-tomcat-8.5.24/webapps/
    - name: stop tomcat
      shell: /apache-tomcat-8.5.24/bin/shutdown.sh
      register: stopTomcat
    - debug: var=stopTomcat.stdout_lines
    - pause: 
        minutes: 0.5
    - name: start tomcat
      shell: /apache-tomcat-8.5.24/bin/startup.sh
      register: startTomcat
    - debug: var=startTomcat.stdout_lines
    - name: start tomcat
      shell: /apache-tomcat-8.5.24/bin/startup.sh
      register: startTomcat
    - debug: var=startTomcat.stdout_lines   
